{{ template "header.html" .}}
<div class="container mb-3">
    <div class="row">
        <div class="col">
            <h1>Get Session Result</h1>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <td>Session ID</td>
                    <td>{{ .getSessionResult.SessionID }}</td>
                </tr>
                <tr>
                    <td>State</td>
                    <td>
                        <span class="badge badge-{{ if eq .getSessionResult.State "COMPLETED"}}success{{ else }}secondary{{ end }}">
                            {{ .getSessionResult.State }}
                        </span>
                    </td>
                </tr>
                {{ if .getSessionResult.ClientSessionToken }}
                    <tr>
                        <td>Client Session Token</td>
                        <td>
                            {{ .getSessionResult.ClientSessionToken }}
                        </td>
                    </tr>
                {{ end }}
                <tr>
                    <td>Client Session Token TTL</td>
                    <td>{{ .getSessionResult.ClientSessionTokenTTL }}</td>
                </tr>
                <tr>
                    <td>User Tracking ID</td>
                    <td>{{ .getSessionResult.UserTrackingID }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    {{/*    {{ if len(.getSessionResult.Checks) > 0 }}*/}}
    {{ if .getSessionResult.Checks }}
        <div class="row pt-4">
            <div class="col">
                <h2>Checks</h2>
                <div class="accordion mt-3" id="checks">
                    {{/*                {{ if .getSessionResult.AuthenticityChecks|length > 0 }}*/}}
                    {{ if .AuthenticityChecks }}
                        <div class="card">
                            <div class="card-header" id="authenticity-checks">
                                <h3 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-authenticity-checks" aria-expanded="true"
                                            aria-controls="collapse-authenticity-checks">
                                        Authenticity Checks
                                    </button>
                                </h3>
                            </div>
                            <div id="collapse-authenticity-checks" class="collapse"
                                 aria-labelledby="authenticity-checks">
                                <div class="card-body">
                                    {{ range $check := .getSessionResult.AuthenticityChecks }}
                                        {{/*                            {% for check in sessionResult.AuthenticityChecks }}*/}}
                                        {{/*                            {% with check=check }}*/}}
                                        {{ template "check.html" $check }}
                                    {{ end }}
                                    {{/*                            {{ end }}*/}}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                    {{/*                {{ if .getSessionResult.TextDataChecks|length > 0 }}*/}}
                    {{ if .TextDataChecks }}
                        <div class="card">
                            <div class="card-header" id="text-data-checks">
                                <h3 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-text-data-checks" aria-expanded="true"
                                            aria-controls="collapse-text-data-checks">
                                        Text Data Checks
                                    </button>
                                </h3>
                            </div>
                            <div id="collapse-text-data-checks" class="collapse" aria-labelledby="text-data-checks">
                                <div class="card-body">
                                    {{ range $check :=  .getSessionResult.TextDataChecks }}
                                        {{/*                            {% for check in sessionResult.TextDataChecks }}*/}}
                                        {{/*                            {% with check=check }}*/}}
                                        {{ template "check.html" $check }}
                                    {{ end }}
                                    {{/*                            {{ end }}*/}}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                    {{/*                {{ if .getSessionResult.FaceMatchChecks|length > 0 }}*/}}
                    {{ if .FaceMatchChecks }}
                        <div class="card">
                            <div class="card-header" id="face-match-checks">
                                <h3 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-face-match-checks" aria-expanded="true"
                                            aria-controls="collapse-face-match-checks">
                                        Face Match Checks
                                    </button>
                                </h3>
                            </div>
                            <div id="collapse-face-match-checks" class="collapse"
                                 aria-labelledby="face-match-checks">
                                <div class="card-body">
                                    {{ range $check :=  .getSessionResult.FaceMatchChecks }}
                                        {{/*                            {% for check in sessionResult.FaceMatchChecks }}*/}}
                                        {% with check=check }}
                                        {{ template "check.html" $check }}
                                    {{ end }}
                                    {{/*                            {{ end }}*/}}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                    {{/*                {{ if .getSessionResult.LivenessChecks|length > 0 }}*/}}
                    {{ if .LivenessChecks }}
                        <div class="card">
                            <div class="card-header" id="liveness-checks">
                                <h3 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-liveness-checks" aria-expanded="true"
                                            aria-controls="collapse-liveness-checks">
                                        Liveness Checks
                                    </button>
                                </h3>
                            </div>
                            <div id="collapse-liveness-checks" class="collapse" aria-labelledby="liveness-checks">
                                <div class="card-body">
                                    {{ range $check := .getSessionResult.AuthenticityChecks }}
                                        {{/*                            {% for check in sessionResult.AuthenticityChecks }}*/}}
                                        {{/*                            {% with check=check }}*/}}
                                        {{ template "check.html"  $check}}
                                        {{/*                           {{ end }}*/}}
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    {{ end }}
    {{/*    {{ if .getSessionResult.Resources.IDDocuments| length < 0 }}*/}}
    {{ if .getSessionResult.Resources.IDDocuments }}
        <div class="row pt-4">
            <div class="col">
                <h2>ID Documents</h2>
            </div>
        </div>
    {{ end }}

    {{/*    {% with doc_num=0 }}*/}}
    {{ range $key, $doc := .getSessionResult.Resources.IDDocuments }}
        {{/*{% for document in sessionResult.Resources.IDDocuments }}*/}}
        {{/*    {% set doc_num = loop.index + 1 }}*/}}
        <div class="row pt-4">
            <div class="col">

                <h3>
                    {{ $doc.DocumentType }} <span
                            class="badge badge-primary">{{ $doc.IssuingCountry }}</span>
                </h3>

                <div class="accordion mt-3">
                    {{ if $doc.DocumentFields }}
                        <div class="card">
                            <div class="card-header" id="document-fields-{{ $key }}">
                                <h4 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-document-fields-{{ $key }}"
                                            aria-expanded="true"
                                            aria-controls="collapse-document-fields-{{ $key }}">
                                        Document Fields
                                    </button>
                                </h4>
                            </div>
                            <div id="collapse-document-fields-{{ $key }}" class="collapse"
                                 aria-labelledby="document-fields-{{ $key }}">
                                <div class="card-body">
                                    {{ if $doc.DocumentFields.Media }}
                                        <h5>Media</h5>
                                        <table class="table table-striped table-light">
                                            <tbody>
                                            <tr>
                                                <td>ID</td>
                                                <td>
                                                    <a href="/media?mediaId={{ $doc.DocumentFields.Media.ID }}">
                                                        {{ $doc.DocumentFields.Media.ID }}
                                                    </a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                    {{ if $doc.TextExtractionTasks }}
                        <div class="card">
                            <div class="card-header" id="text-extraction-tasks-{{ $key }}">
                                <h4 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-text-extraction-tasks-{{ $key }}"
                                            aria-expanded="true"
                                            aria-controls="collapse-text-extraction-tasks-{{ $key }}">
                                        Text Extraction Tasks
                                    </button>
                                </h4>
                            </div>
                            <div id="collapse-text-extraction-tasks-{{ $key }}" class="collapse"
                                 aria-labelledby="text-extraction-tasks-{{ $key }}">
                                <div class="card-body">
                                    {{ range $task := $doc.TextExtractionTasks }}

                                        {{/*                        {% for task in document.text_extraction_tasks }}*/}}

                                        {{/*                            {% with task=task }}*/}}
                                        {{ template "task.html" $task }}

                                        {{ if $task.GeneratedTextDataChecks}}
                                            <h5>Generated Text Data Checks</h5>

                                            {{ range $generatedCheck := $task.GeneratedTextDataChecks }}
                                                {{/*                        {% for generated_check in task.generated_textDataChecks }}*/}}
                                                <table class="table table-striped">
                                                    <tbody>
                                                    <tr>
                                                        <td>ID</td>
                                                        <td>{{ $generatedCheck.ID }}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            {{ end }}
                                        {{ end }}

                                        {{ if $task.GeneratedMedia}}
                                            <h5>Generated Media</h5>

                                            {{ range $generatedMedia := $task.GeneratedMedia }}
                                                {{/*                        {% for generated_media in task.generated_media }}*/}}
                                                <table class="table table-striped">
                                                    <tbody>
                                                    <tr>
                                                        <td>ID</td>
                                                        <td>
                                                            <a href="/media?mediaId={{ $generatedMedia.id }}">{{ $generatedMedia.id }}</a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Type</td>
                                                        <td>{{ $generatedMedia.type }}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            {{ end }}
                                        {{ end }}
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                    {{ end }}

                    {{ if $doc.Pages}}
                        <div class="card">
                            <div class="card-header" id="document-pages-{{ $key }}">
                                <h4 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-document-pages-{{ $key }}"
                                            aria-expanded="true"
                                            aria-controls="collapse-document-pages-{{ $key }}">
                                        Pages
                                    </button>
                                </h4>
                            </div>
                            <div id="collapse-document-pages-{{ $key }}" class="collapse"
                                 aria-labelledby="document-pages-{{ $key }}">
                                <div class="card-body">
                                    <div class="card-group">
                                        {{ range $page := $doc.Pages }}

                                            {{/*                            {% for page in document.Pages }}*/}}
                                            {{ if $page.Media }}
                                                <div class="card" style="width: 18rem;">
                                                    <img class="card-img-top"
                                                         src="/media?mediaId={{ $page.Media.ID }}"/>
                                                    <div class="card-body">
                                                        <p>Method: {{ $page.CaptureMethod }}</p>
                                                    </div>
                                                </div>
                                            {{ end }}
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    {{ end }}
    {{/*   {{ end }}*/}}

    {{ if .getSessionResult.Resources.ZoomLivenessResources}}
        <div class="row pt-4">
            <div class="col">
                <h2>Zoom Liveness Resources</h2>
            </div>
        </div>
    {{ end }}

    {{/*    {% with liveness_num=0 }}*/}}
    {{ range $livenessNum, $liveness := .getSessionResult.Resources.ZoomLivenessResources }}
        {{/*{% for liveness in sessionResult.resources.zoom_liveness_resources }}*/}}
        {{/*    {% set liveness_num = loop.index + 1 }}*/}}
        <div class="row pt-4">
            <div class="col">
                <table class="table table-striped table-light">
                    <tbody>
                    <tr>
                        <td>ID</td>
                        <td>{{ $liveness.ID }}</td>
                    </tr>
                    </tbody>
                </table>

                <div class="accordion mt-3">
                    {{ if $liveness.Frames}}
                        <div class="card">
                            <div class="card-header" id="liveness-{{ $livenessNum }}-frames">
                                <h3 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapse-liveness-{{ $livenessNum }}-frames"
                                            aria-expanded="true"
                                            aria-controls="collapse-liveness-{{ $livenessNum }}-frames">
                                        Frames
                                    </button>
                                </h3>
                            </div>
                            <div id="collapse-liveness-{{ $livenessNum }}-frames" class="collapse"
                                 aria-labelledby="liveness-{{ $livenessNum }}-frames">
                                <div class="card-group">
                                    {{ range $frame := $liveness.Frames }}
                                        {{ if $frame.Media }}
                                            <div class="card">
                                                <img class="card-img-top"
                                                     src="/media?mediaId={{ $frame.Media.ID }}"/>
                                                <div class="card-body">
                                                    <h5 class="card-title">Frame</h5>
                                                </div>
                                            </div>
                                        {{ end }}
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    {{ end }}
</div>
{{ template "footer.html" .}}